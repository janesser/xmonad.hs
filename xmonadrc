#!/bin/bash

if [ ! "$(pidof copyq)" ] ; then
   copyq &
fi

xsetroot -solid black # feh for background image

if [ ! "$(pidof nm-applet)" ] ; then
   nm-applet --sm-disable &
fi

if [ ! "$(pidof xscreensaver)" ] ; then
   xscreensaver --no-splash &
fi


if [ ! "$(pidof light-locker)" ] ; then
   light-locker &
fi

# suppress movement to avoid accidental mouse-focus (no -t)
if [ ! "$(pidof syndaemon)" ] ; then
   syndaemon -i 2 -d -K & 
fi

export DEFAULT_SINK=`pactl get-default-sink`

# pipewire-pulse
if [ ! "$(pidof dropbox)" ] ; then
   dropbox start
fi

# sudo add-apt-repository ppa:bitseater/ppa
if [ ! "$(pidof com.gitlab.bitseater.meteo)" ] ; then
   com.gitlab.bitseater.meteo &
fi

### COMM ###

if [ ! "$(pidof thunderbird)" ]; then
    thunderbird &
fi

if [ ! "$(pidof signal-desktop)" ]; then
    signal-desktop &
fi

# whatsapp
if [ ! "$(xwininfo -root -tree | grep 'WhatsApp Web')" ]; then
    dex .local/share/applications/chrome-hnpfjngllnobngcgfapefoaidbinmjnm-Default.desktop &
fi

# elements
if [ ! "$(xwininfo -root -tree | grep 'Element')" ]; then
    dex .local/share/applications/chrome-ejhkdoiecgkmdpomoahkdihbcldkgjci-Default.desktop &
fi

# mastodon det.social
if [ ! "$(xwininfo -root -tree | grep 'det.social')" ]; then
    dex .local/share/applications/chrome-hbpeoicanfoeibcjgkepjpbkdmelgaem-Default.desktop &
fi